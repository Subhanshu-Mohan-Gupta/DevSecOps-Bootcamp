Step 1:

Wrote a basic python code for app and it's requirement file


Step 2:

Wrote a Dockerfile to build a image of the python app


Step 3:

installed Trivy,semgrep


Semgrep:   pip install semgrep==1.37.0

trivy:   curl -sfL https://raw.githubusercontent.com/aquasecurity/trivy/main/contrib/install.sh \
            | sudo sh -s -- -b /usr/local/bin


Step 4:


Wrote a github action workflow which builds image and runs all the checks.



Step 5:

Commands to run the scans:

Trivy(dependency): trivy fs --quiet --format json --output "${OUT}" . || true

Trivy(image): docker pull "$IMAGE" || true
trivy image --quiet --format json --output "${OUT}" "$IMAGE" || true  	


Semgrep:    semgrep --config auto --json --output "${OUT}" || true


Docker-Bench:   docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \
  --net host --pid host --cap-add audit_control \
  docker/docker-bench-security:latest > "${RAW_OUT}" 2>&1 || true



Step 6:

Wrote a threshold file so that if the check reports exceed the number of vulnerabilites found it should stop the wokrflow




